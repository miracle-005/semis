"use strict";var _this=void 0;!function(o){var e=o(document);o(window);o(".story-block .story-items").slick({slidesToShow:4,slidesToScroll:1,arrows:!1,rtl:!!o("body").hasClass("rtl")}),e.on("click",".example-delete-chat",function(e){var t=o(e.target).closest("li");return Swal.fire({title:"Do you want to delete the chat?",showCancelButton:!0,confirmButtonText:"Delete",animation:!1}).then(function(e){e.isConfirmed&&(t.hasClass("active")&&a(),t.slideUp(200,function(){t.remove()}))}),!1}),e.on("click",".example-delete-message",function(e){var t=o(e.target).closest(".message-item");return Swal.fire({title:"Do you want to delete the message?",showCancelButton:!0,confirmButtonText:"Delete from me",animation:!1}).then(function(e){e.isConfirmed&&(ps_chat_content.update(),t.remove())}),!1}),e.on("click",".example-block-user",function(){return Swal.fire({title:"Do you want to block this user?",showCancelButton:!0,confirmButtonText:"Block",animation:!1}).then(function(e){e.isConfirmed&&Swal.fire("Blocked!","","success")}),!1}),e.on("click",".video-call-request",function(){return o("#videoCallRequest").modal("show"),!1}),e.on("click",".video-call-request-accept",function(){return o("#videoCallRequest").modal("hide"),setTimeout(function(){o("#videoCall").modal("show"),o(".chat-stopwatch").stopwatch().stopwatch("start")},500),!1}),e.on("click",".voice-call-request",function(){return o("#voiceCallRequest").modal("show"),!1}),e.on("click",".voice-call-accept",function(){return o("#voiceCallRequest").modal("hide"),setTimeout(function(){o("#voiceCall").modal("show"),o(".chat-stopwatch").stopwatch().stopwatch("start")},500),!1}),e.on("click",".mute-event",function(){o(_this).find("svg").replaceWith(feather.icons["volume-x"].toSvg()),o(_this).removeClass("mute-event"),o(_this).addClass("unmute-event")}),e.on("click",".unmute-event",function(){o(_this).find("svg").replaceWith(feather.icons["volume-2"].toSvg()),o(_this).removeClass("unmute-event"),o(_this).addClass("mute-event")});function n(e) {
    if (e.type === "in-typing") {
        o(".messages").append(`
            <div class="message-item in in-typing">
                <div class="message-content">
                    <div class="message-text">
                        <div class="writing-animation">
                            <div class="writing-animation-line"></div>
                            <div class="writing-animation-line"></div>
                            <div class="writing-animation-line"></div>
                        </div>
                    </div>
                </div>
            </div>
        `);
    } else {
        o(".messages .message-item.in-typing").remove();  // Remove typing animation before adding message

        let messageHTML = `
            <div class="message-item ${e.type}">
                <div class="message-content">
                    <div class="message-text">${e.text}</div>
                </div>
            </div>
        `;

        o(".messages").append(messageHTML);
    }
}

// Function to get CSRF token from cookies
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== "") {
        let cookies = document.cookie.split(";");
        for (let i = 0; i < cookies.length; i++) {
            let cookie = cookies[i].trim();
            if (cookie.startsWith(name + "=")) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
e.on("click", ".chat-user", function (e) {
    let chatSection = o(".chat");
    let noMessageContainer = o(".no-message-container");
    let sidebar = o(".left-sidebar");  // Sidebar containing the chat list

    chatSection.removeClass("no-message").addClass("open");
    noMessageContainer.addClass("d-none");

    // ✅ Hide the chat list sidebar on mobile to show the chat section
    if (window.innerWidth <= 768) {  // Only on mobile
        sidebar.hide(); // Hide chat list
    }

    // ✅ Scroll to the latest message after switching
    setTimeout(function () {
        o(".chat .chat-body").scrollTop(o(".chat .chat-body")[0].scrollHeight);
    }, 500);
});


,e.on("click",".chat-emojis ul li",function(){var e=o(this).text(),t=o(".chat .chat-footer .form-control.form-control-main");t.val(t.val()+" "+e+" ").focus()}),e.on("click",".left-sidebar .list-group .list-group-item",function(e){return o(".chat").addClass("no-message"),o(".no-message-container").addClass("d-none"),o(".chat-preloader").removeClass("d-none"),o(".left-sidebar .list-group .list-group-item").removeClass("active"),o(e.currentTarget).addClass("active").removeClass("unread-chat").find(".new-message-count").remove(),setTimeout(function(){o(".chat").addClass("open").removeClass("no-message"),o(".no-message-container").removeClass("d-none"),o(".chat-preloader").addClass("d-none"),o(".chat .chat-body").scrollTop(o(".chat .chat-body")[0].scrollHeight)},500),!1}),e.on("click",".example-close-selected-chat",function(){return a()}),e.on("click",".example-chat-close",function(){return a(),!1}),o(".chat .chat-body .messages .message-item .message-content-images a").fancybox(),e.on("click",".example-app-tour-start",function(){return t(),o('[data-toggle="dropdown"]').dropdown("hide"),!1});var a=function(){o(".left-sidebar .list-group .list-group-item").removeClass("active"),o(".chat").addClass("no-message").removeClass("open")},t=function(){introJs().setOptions({steps:[{element:document.querySelector('[data-intro-js="1"]'),intro:"Start a chat, create groups or add friends.",position:"right"},{element:document.querySelector('[data-intro-js="2"]'),intro:"See the chat list."},{element:document.querySelector('[data-intro-js="3"]'),intro:"Manage your account"},{element:document.querySelector('[data-intro-js="4"]'),intro:"Check out other people's stories!"},{element:document.querySelector('[data-intro-js="5"]'),intro:"Choose a chat."},{element:document.querySelector('[data-intro-js="6"]'),intro:"Send messages in the chat."},{element:document.querySelector('[data-intro-js="7"]'),intro:"Check out other operations."}]}).setOption("disableInteraction",!0).start()}}(jQuery);
